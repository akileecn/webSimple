 <!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../jquerymobile/css/jquery.mobile-1.4.5.css">
  <style>
  		.col_cv_alt {
		    margin: 0 0 0 5px;
		    text-align: left;
		    font-size: 0.85em;
		    color: #F00;
		}
  </style>  	
  	<script src="../jquerymobile/js/jquery-1.12.3.min.js"></script>
  	<script src="../jquerymobile/js/jquery.mobile-1.4.5.min.js"></script>
    <script src="../jquerymobile/js/common.js"></script>
  </head>
  <body>
   <div data-role="page" id="pageone">
       <div data-role="header" data-position="fixed" data-theme="a">
          <h1>用户注册</h1>
       </div>
       
       <div data-role="content" style="margin-top:-10px;padding-top:30px;">
           
           <form id="registerForm" method="post">
           
              <div><input type="password" name="password" placeholder="输入密码">
                   <div class="col_cv_alt" data-error="password"></div>
              </div>
              <div><input type="password" name="password2" placeholder="确认密码">
              	   <div class="col_cv_alt" data-error="password2"></div>
              </div>
              <div><font style="color:#daa;padding-left:10px;">6-16位，数字、字母或常用符号，至少包含2种组合</font></div>
              <br>
              <div><input type="text" name="name" id="name" placeholder="请输入真实姓名">
              	   <div class="col_cv_alt" data-error="name"></div>
              </div>	   
              <div><input type="text" name="idNumber" id="idNumber" placeholder="请输入身份证号码">
              	   <div class="col_cv_alt" data-error="idNumber"></div>
              </div>
              <br>
              <div><input type="text" name="email" id="email" placeholder="请输入邮箱注册">
              	   <div class="col_cv_alt" data-error="email"></div>
              </div>	   
              <div><input type="text" name="mobile" id="mobile" placeholder="请输入手机号">
              	   <div class="col_cv_alt" data-error="mobile"></div>
              </div>
              <br>
              <div><input type="text" name="question" placeholder="找回密码问题">
              	   <div class="col_cv_alt" data-error="question"></div>
              </div>	   
              <div><input type="text" name="answer" placeholder="答案">
              	   <div class="col_cv_alt" data-error="answer"></div></div>
              <br>
              <div>
	                <input type="text" name="captcha" placeholder="验证码">
	              	<div class="col_cv_alt" data-error="captcha"></div>
	                <img style="width:80px;height:40px;" id="captcha" src="">
	                <a href="javascript:changeCaptcha();">换一张</a>
              </div>
              <!-- 
              <div>
                <div><input type="text" name="fname" id="fname" placeholder="短信验证码"></div>
                <div><a data-role="button" href="#">获取手机验证码</a></div>
              </div>
               -->
              <br>
              <div>
              	 <input name="isAgree" type="checkbox" value="">
              	 <a href="#" style="text-decoration:underline;margin-left:35px;">阅读并接受《用户协议》</a>
              </div> 
           </form>
           <br>
           <div align="center">
              <a data-role="button" href="#" onclick="register()">注册</a>
           </div>
   </div>
   </body>
</html>
<script>
$(function(){
	changeCaptcha();
});

//注册
function register(){
	$.ajax({
		beforeSend:function(datas){
			if(!$("#registerForm input[name='isAgree']").is(":checked")){
				alert("阅读并接受《用户协议》之后才能注册");
				return false;
			}
			var password=$("#registerForm input[name='password']").val();
			var password2=$("#registerForm input[name='password2']").val();
			if(password!=password2){
				$('#registerForm').showError({"password":"新旧密码不一致","password2":"新旧密码不一致"})
				return false;
			}else{
				return true;
			}
		},
	    url:baseUrl+"/user/register",
	    data:$('#registerForm').serialize(),
	    type:"post",
		success:function(text) {
			if(text.success){
				alert("注册成功");
				location.href="login.html";
			}else{
				changeCaptcha();
				$('#registerForm').showError(text.error);
				
			}
		}
	});
}

//换验证码
function changeCaptcha(){
	$("#captcha").attr("src",baseUrl+"/user/captchaImage.png?r="+Math.random());
}
</script>
