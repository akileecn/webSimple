 <!DOCTYPE html>
  <html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../jquerymobile/css/jquery.mobile-1.4.5.css">
  <style>
  		.col_cv_alt {
		    margin: 0 0 0 5px;
		    text-align: left;
		    font-size: 0.85em;
		    color: #F00;
		}
  </style>
  	<script src="../jquerymobile/js/jquery-1.12.3.min.js"></script>
  	<script src="../jquerymobile/js/jquery.mobile-1.4.5.min.js"></script>
    <script src="../jquerymobile/js/base64.js"></script>
    <script src="../jquerymobile/js/common.js"></script>
  </head>
  <body>
   <div data-role="page" id="pageone">
       <div data-role="header" data-position="fixed">
          <h1>用户登录</h1>
          <a href="#" data-icon="home" onclick="goHome($(this))"  data-iconpos="notext" data-direction="reverse">Home</a>
       </div>
       
       <div data-role="content" style="margin-top:-10px;padding-top:30px;">
           <div align="center">用户登录</div>
           <form id="loginForm"  method="post">
              <input type="text" name="username" id="username" placeholder="身份证号码/邮箱/手机号码">
              	<div class="col_cv_alt" data-error="username"></div>
              <input type="password" name="password" id="password" placeholder="密码">
              	<div class="col_cv_alt" data-error="password"></div>
              <input type="text" name="captcha" placeholder="验证码">
              	<div class="col_cv_alt" data-error="captcha"></div>
              <img style="width:80px;height:40px;" id="captcha" src="">
              <a href="javascript:changeCaptcha();">换一张</a>
           </form>
           <div  style="padding:10px 0 10px 10px;">
           		<a href="javascript:toforgetPassword();">忘记密码？</a>
           </div>
           <div align="center">
              <a data-role="button" href="#" onclick="login()">登录</a>
              <a data-role="button" href="#" onclick="register()">注册</a>
           </div>
       </div>
   </div>
   </body>
</html>
<script>
$(function(){

	changeCaptcha();   //加载验证码
});
	function login(){
		var $password=$("#loginForm").find("input[name='password']");
		var b = new Base64();
		$password.val(b.encode($password.val()));
		$.ajax({
			url:baseUrl+"/user/login",
			data:$("#loginForm").serialize(),
			type:"post",
			success:function(text){
				$("#loginForm").find(".col_cv_alt").empty();
				$("#loginForm").find("input[name='password']").val("");
				if(text.success){
					showDialog({
						head:"提示",
						title:"欢迎您访问瑞丰银行网站招聘栏目，请注意，招聘用户专门为投简历所使用，与我行其他用户没有关联",
						content:"",
						href:"main.html",
						type:"opens"
					});
				}else{
					changeCaptcha();
					$("#loginForm").showError(text.error);
				}
			}
		});
	
	}
	
	//换验证码
	function changeCaptcha(){
		$("#captcha").attr("src",baseUrl+"/user/captchaImage.png?r="+Math.random());
	}
	
	function register(){
		location.href="register.html";
	}
	
	//忘记密码
	function toforgetPassword(){
		location.href="forgetPassword.html";
	}
</script>
